# ğŸ§ª TDD (í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ) ê³„íšì„œ

ì´ ë¬¸ì„œëŠ” 'ì‹¤ì‹œê°„ í™˜ìœ¨ ì •ë³´ ë° ë¶„ì„ ì›¹ ì„œë¹„ìŠ¤'ë¥¼ í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ(TDD) ë°©ë²•ë¡ ì— ë”°ë¼ ê°œë°œí•˜ê¸° ìœ„í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì™€ ì ˆì°¨ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ê°œë°œì€ **Red(ì‹¤íŒ¨) -> Green(ì„±ê³µ) -> Refactor(ê°œì„ )** ì‚¬ì´í´ì„ ë”°ë¦…ë‹ˆë‹¤.

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ê³„íš

### 1. ExchangeRateService í…ŒìŠ¤íŠ¸

#### 1.1 API ì—°ë™ ë° ë°ì´í„° ì²˜ë¦¬

| í…ŒìŠ¤íŠ¸ ID | ê¸°ëŠ¥ ëª…ì„¸ | í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Given-When-Then) |
| :--- | :--- | :--- |
| **1.1.1** | **ê¸°ë³¸ API í˜¸ì¶œ** | **Given:** `ExchangeRate-API` í˜¸ì¶œì´ ì„±ê³µí•  ê²ƒì´ë¼ ê°€ì • (fetch ëª¨í‚¹)<br>**When:** `fetchExchangeRates()` ë©”ì„œë“œ í˜¸ì¶œ<br>**Then:** ë°˜í™˜ëœ ë°ì´í„°ì˜ `base`ê°€ 'USD'ì´ê³ , `rates.KRW` ê°’ì´ ìˆ«ìì¸ì§€ í™•ì¸ |
| **1.1.2** | **ì£¼ API ì‹¤íŒ¨ ì‹œ ë°±ì—… ì „í™˜** | **Given:** `ExchangeRate-API`(1ìˆœìœ„) í˜¸ì¶œì€ ì‹¤íŒ¨, `CurrencyAPI`(2ìˆœìœ„) í˜¸ì¶œì€ ì„±ê³µí•˜ë„ë¡ ëª¨í‚¹<br>**When:** `fetchExchangeRates()` í˜¸ì¶œ<br>**Then:** ìµœì¢… ë°˜í™˜ëœ ë°ì´í„°ì˜ `source`ê°€ 'CurrencyAPI'ì¸ì§€ í™•ì¸ |
| **1.1.3** | **ëª¨ë“  API ì‹¤íŒ¨** | **Given:** ëª¨ë“  API í˜¸ì¶œì´ ì‹¤íŒ¨í•˜ë„ë¡ ëª¨í‚¹<br>**When:** `fetchExchangeRates()` í˜¸ì¶œ<br>**Then:** `getDefaultRates()`ê°€ ì œê³µí•˜ëŠ” ê¸°ë³¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸ |

#### 1.2 ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°±ì—…/ë³µì›

| í…ŒìŠ¤íŠ¸ ID | ê¸°ëŠ¥ ëª…ì„¸ | í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Given-When-Then) |
| :--- | :--- | :--- |
| **1.2.1** | **ì„±ê³µ ì‹œ ë°ì´í„° ë°±ì—…** | **Given:** API í˜¸ì¶œì´ ì„±ê³µì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´<br>**When:** `fetchExchangeRates()`ê°€ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ëœ í›„<br>**Then:** `localStorage`ì— 'exchange-rate-backup' í‚¤ë¡œ ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸ |
| **1.2.2** | **API ì‹¤íŒ¨ ì‹œ ë°ì´í„° ë³µì›** | **Given:** ëª¨ë“  API í˜¸ì¶œì´ ì‹¤íŒ¨í•˜ê³ , `localStorage`ì— ìœ íš¨í•œ(24ì‹œê°„ ì´ë‚´) ë°±ì—… ë°ì´í„°ê°€ ì¡´ì¬í•¨<br>**When:** `fetchExchangeRates()` í˜¸ì¶œ<br>**Then:** `localStorage`ì—ì„œ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸ |
| **1.2.3** | **ë§Œë£Œëœ ë°ì´í„° ë¯¸ì‚¬ìš©** | **Given:** ëª¨ë“  API í˜¸ì¶œì´ ì‹¤íŒ¨í•˜ê³ , `localStorage`ì˜ ë°±ì—… ë°ì´í„°ê°€ 24ì‹œê°„ì„ ì´ˆê³¼í•¨<br>**When:** `fetchExchangeRates()` í˜¸ì¶œ<br>**Then:** ë°±ì—… ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , `getDefaultRates()`ì˜ ê¸°ë³¸ê°’ì„ ë°˜í™˜í•˜ëŠ”ì§€ í™•ì¸ |

#### 1.3 ë°ì´í„° ì •ê·œí™” (Normalization)

| í…ŒìŠ¤íŠ¸ ID | ê¸°ëŠ¥ ëª…ì„¸ | í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Given-When-Then) |
| :--- | :--- | :--- |
| **1.3.1** | **EUR ê¸°ë°˜ ë°ì´í„° ë³€í™˜** | **Given:** `Fixer.io`(EUR ê¸°ì¤€)ì˜ ìƒ˜í”Œ ì‘ë‹µì„ ëª¨í‚¹<br>**When:** `normalizeData()` ë©”ì„œë“œì— í•´ë‹¹ ë°ì´í„°ë¥¼ ì „ë‹¬<br>**Then:** ë°˜í™˜ëœ ë°ì´í„°ì˜ `base`ê°€ 'USD'ì´ê³ , ëª¨ë“  í™˜ìœ¨ì´ USD ê¸°ì¤€ìœ¼ë¡œ ì¬ê³„ì‚°ë˜ì—ˆëŠ”ì§€ í™•ì¸ |

### 2. ProfitCalculator í…ŒìŠ¤íŠ¸

| í…ŒìŠ¤íŠ¸ ID | ê¸°ëŠ¥ ëª…ì„¸ | í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Given-When-Then) |
| :--- | :--- | :--- |
| **2.1.1** | **í™˜ì°¨ìµ ê³„ì‚°** | **Given:** ë§¤ì…ê°€ 1300, í˜„ì¬ê°€ 1350, ê¸ˆì•¡ 100<br>**When:** `calculateProfitLoss(1300, 1350, 100)` í˜¸ì¶œ<br>**Then:** `5000`ì„ ë°˜í™˜ |
| **2.1.2** | **í™˜ì°¨ì† ê³„ì‚°** | **Given:** ë§¤ì…ê°€ 1350, í˜„ì¬ê°€ 1300, ê¸ˆì•¡ 100<br>**When:** `calculateProfitLoss(1350, 1300, 100)` í˜¸ì¶œ<br>**Then:** `-5000`ì„ ë°˜í™˜ |
| **2.1.3** | **ìœ íš¨í•˜ì§€ ì•Šì€ ì…ë ¥ ì²˜ë¦¬** | **Given:** ë§¤ì…ê°€ì— ìˆ«ìê°€ ì•„ë‹Œ 'abc' ì…ë ¥<br>**When:** `calculateProfitLoss('abc', 1300, 100)` í˜¸ì¶œ<br>**Then:** ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ê±°ë‚˜ `NaN`ì„ ë°˜í™˜ |

### 3. DeveloperModeService í…ŒìŠ¤íŠ¸

| í…ŒìŠ¤íŠ¸ ID | ê¸°ëŠ¥ ëª…ì„¸ | í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Given-When-Then) |
| :--- | :--- | :--- |
| **3.1.1** | **ê°œë°œì ëª¨ë“œ ê°ì§€** | **Given:** ê°œë°œì ë„êµ¬ê°€ ì—´ë¦° ìƒíƒœ (ì°½ í¬ê¸° ì°¨ì´ > 100px)<br>**When:** `isDeveloperModeEnabled()` í˜¸ì¶œ<br>**Then:** `true`ë¥¼ ë°˜í™˜ |
| **3.1.2** | **ì¼ë°˜ ëª¨ë“œ ê°ì§€** | **Given:** ê°œë°œì ë„êµ¬ê°€ ë‹«íŒ ìƒíƒœ (ì°½ í¬ê¸° ì°¨ì´ < 100px)<br>**When:** `isDeveloperModeEnabled()` í˜¸ì¶œ<br>**Then:** `false`ë¥¼ ë°˜í™˜ |
| **3.1.3** | **ì¡°ê±´ë¶€ ë¡œê·¸ ì¶œë ¥** | **Given:** ê°œë°œì ëª¨ë“œê°€ í™œì„±í™”ëœ ìƒíƒœ<br>**When:** `logIfDeveloperMode('í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€')` í˜¸ì¶œ<br>**Then:** `console.log`ê°€ í˜¸ì¶œë¨ |
| **3.1.4** | **ì¼ë°˜ ëª¨ë“œì—ì„œ ë¡œê·¸ ë¯¸ì¶œë ¥** | **Given:** ê°œë°œì ëª¨ë“œê°€ ë¹„í™œì„±í™”ëœ ìƒíƒœ<br>**When:** `logIfDeveloperMode('í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€')` í˜¸ì¶œ<br>**Then:** `console.log`ê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ |

### 4. ChartService í…ŒìŠ¤íŠ¸

| í…ŒìŠ¤íŠ¸ ID | ê¸°ëŠ¥ ëª…ì„¸ | í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Given-When-Then) |
| :--- | :--- | :--- |
| **4.1.1** | **ë‹¤ì¤‘ í†µí™” ì°¨íŠ¸ ë°ì´í„° ìƒì„±** | **Given:** 5ê°œ í†µí™”(KRW, CNY, USD, JPY, EUR)ì˜ 30ì¼ê°„ í™˜ìœ¨ ë°ì´í„°<br>**When:** `createMultiCurrencyChart()` í˜¸ì¶œ<br>**Then:** 5ê°œì˜ ë°ì´í„°ì…‹ì´ ê°ê° ê³ ìœ í•œ ìƒ‰ìƒìœ¼ë¡œ ìƒì„±ë¨ |
| **4.1.2** | **ì°¨íŠ¸ ìƒ‰ìƒ ë§¤í•‘** | **Given:** í†µí™” ì½”ë“œ 'KRW'<br>**When:** `getCurrencyColor('KRW')` í˜¸ì¶œ<br>**Then:** '#007bff' (íŒŒë€ìƒ‰) ë°˜í™˜ |
| **4.1.3** | **30ì¼ ë°ì´í„° ë²”ìœ„ ê²€ì¦** | **Given:** ê³¼ê±° í™˜ìœ¨ ë°ì´í„° ë°°ì—´<br>**When:** `getLast30DaysData()` í˜¸ì¶œ<br>**Then:** ì •í™•íˆ 30ì¼ê°„ì˜ ë°ì´í„°ë§Œ ë°˜í™˜ |
| **4.1.4** | **ì°¨íŠ¸ ë°˜ì‘í˜• ì„¤ì •** | **Given:** í™”ë©´ í¬ê¸° ë³€ê²½ ì´ë²¤íŠ¸<br>**When:** `updateChartResponsiveness()` í˜¸ì¶œ<br>**Then:** ì°¨íŠ¸ í¬ê¸°ê°€ í™”ë©´ì— ë§ê²Œ ì¡°ì •ë¨ |

## ğŸš€ ê°œë°œ ìˆœì„œ

### 1. Jest í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì •

1. **`package.json` íŒŒì¼ í™•ì¸ ë° ìƒì„±**
   - í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `package.json` íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
   - ì—†ë‹¤ë©´ `npm init -y` ëª…ë ¹ì–´ë¡œ ìƒì„±

2. **Jest ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜**
   ```bash
   npm install --save-dev jest babel-jest @babel/core @babel/preset-env
   ```

3. **Babel ì„¤ì • íŒŒì¼ ìƒì„±**
   - í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `babel.config.js` íŒŒì¼ ìƒì„±
   - `@babel/preset-env` ì„¤ì •ìœ¼ë¡œ ES6+ ë¬¸ë²• ì§€ì›

4. **í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€**
   - `package.json`ì˜ `"scripts"` ì„¹ì…˜ì— `"test": "jest"` ì¶”ê°€

5. **ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í´ë” êµ¬ì¡° ìƒì„±**
   - `src/services/` í´ë” ìƒì„±
   - ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‘ì„±

6. **í…ŒìŠ¤íŠ¸ í™˜ê²½ ê²€ì¦**
   - `npm test` ëª…ë ¹ì–´ë¡œ í…ŒìŠ¤íŠ¸ í™˜ê²½ í™•ì¸

### 2. TDD ì‚¬ì´í´ ì§„í–‰

1. **`TDD_ê³„íšì„œ.md` 1.1.1** í…ŒìŠ¤íŠ¸ë¶€í„° ìˆœì„œëŒ€ë¡œ **Red -> Green -> Refactor** ì‚¬ì´í´ ì§„í–‰
2. `ExchangeRateService` ê°œë°œ ì™„ë£Œ í›„, **2.1.1** í…ŒìŠ¤íŠ¸ë¶€í„° `ProfitCalculator` ê°œë°œ ì§„í–‰
3. `ProfitCalculator` ì™„ë£Œ í›„, **3.1.1** í…ŒìŠ¤íŠ¸ë¶€í„° `DeveloperModeService` ê°œë°œ ì§„í–‰

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Test)
- **ë°ì´í„° ì²˜ë¦¬ ê³„ì¸µ**: `getExchangeRate()`ê°€ ê¸°ë³¸/ë°±ì—… API í˜¸ì¶œ, ë¡œì»¬ ìºì‹œ ì‚¬ìš©, ê¸°ë³¸ê°’ ë°˜í™˜ì„ ì˜¬ë°”ë¥´ê²Œ ìˆ˜í–‰í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
- **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ**: `calculateProfit()`ì˜ ì •í™•í•œ ê³„ì‚° ê²°ê³¼ ë° ìœ íš¨í•˜ì§€ ì•Šì€ ê°’ì— ëŒ€í•œ ì—ëŸ¬ ì²˜ë¦¬
- **ê°œë°œì ëª¨ë“œ ê³„ì¸µ**: `isDeveloperModeEnabled()`ì˜ ì •í™•í•œ ê°ì§€ ë° `logIfDeveloperMode()`ì˜ ì¡°ê±´ë¶€ ì¶œë ¥

### í†µí•© í…ŒìŠ¤íŠ¸ (Integration Test)
- ë‹¤ì¤‘ API ë°±ì—… ì‹œìŠ¤í…œì´ ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ ë³€í™”ì— ë”°ë¼ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
- ë°ì´í„° ë¡œë”© ìƒíƒœ, ìºì‹œ ì‚¬ìš© ìƒíƒœ, ì˜¤í”„ë¼ì¸ ìƒíƒœì— ë”°ë¥¸ UI ë³€í™” ë° ë©”ì‹œì§€ í‘œì‹œê°€ ì •í™•í•œì§€ í…ŒìŠ¤íŠ¸
- í™˜ì°¨ì† ê³„ì‚°ê¸° ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ ë° ê²°ê³¼ í‘œì‹œê°€ UIì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°„ì— ì˜¬ë°”ë¥´ê²Œ ì—°ë™ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸

### ì‚¬ìš©ì í…ŒìŠ¤íŠ¸ (User Acceptance Test)
- ì‹¤ì œ ì‚¬ìš©ìê°€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©° ê¸°ëŠ¥ì˜ ì •ìƒ ì‘ë™ ì—¬ë¶€, ì‚¬ìš© í¸ì˜ì„±, ë””ìì¸ ë§Œì¡±ë„ ë“±ì„ í‰ê°€
- í”¼ë“œë°±ì„ ìˆ˜ì§‘í•˜ì—¬ ê°œì„ ì— ë°˜ì˜

## ğŸ”„ TDD ì‚¬ì´í´ ì˜ˆì‹œ

### Red ë‹¨ê³„ (ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±)
```javascript
// ExchangeRateService.test.js
describe('ExchangeRateService', () => {
  test('ê¸°ë³¸ API í˜¸ì¶œì´ ì„±ê³µí•˜ë©´ í™˜ìœ¨ ë°ì´í„°ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤', async () => {
    // Given: API í˜¸ì¶œ ì„±ê³µ ëª¨í‚¹
    global.fetch = jest.fn(() =>
      Promise.resolve({
        ok: true,
        json: () => Promise.resolve({
          base: 'USD',
          rates: { KRW: 1342.50 }
        })
      })
    );

    // When: ì„œë¹„ìŠ¤ í˜¸ì¶œ
    const service = new ExchangeRateService();
    const result = await service.fetchExchangeRates();

    // Then: ì˜ˆìƒ ê²°ê³¼ í™•ì¸
    expect(result.base).toBe('USD');
    expect(result.rates.KRW).toBe(1342.50);
  });
});
```

### Green ë‹¨ê³„ (í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ìµœì†Œí•œì˜ êµ¬í˜„)
```javascript
// ExchangeRateService.js
export class ExchangeRateService {
  async fetchExchangeRates() {
    const response = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
    const data = await response.json();
    return data;
  }
}
```

### Refactor ë‹¨ê³„ (ì½”ë“œ ê°œì„ )
```javascript
// ExchangeRateService.js
export class ExchangeRateService {
  constructor() {
    this.baseUrl = 'https://api.exchangerate-api.com/v4/latest/USD';
  }

  async fetchExchangeRates() {
    try {
      const response = await fetch(this.baseUrl);
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }
      const data = await response.json();
      return this.normalizeData(data);
    } catch (error) {
      console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', error);
      return this.getDefaultRates();
    }
  }

  normalizeData(data) {
    return {
      base: data.base || 'USD',
      rates: data.rates || {},
      date: data.date || new Date().toISOString().split('T')[0]
    };
  }

  getDefaultRates() {
    return {
      base: 'USD',
      rates: { KRW: 1342.50, EUR: 0.92, JPY: 148.35, CNY: 7.23 },
      date: new Date().toISOString().split('T')[0],
      isDefault: true
    };
  }
}
```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

- **ë¼ì¸ ì»¤ë²„ë¦¬ì§€**: 90% ì´ìƒ
- **ë¸Œëœì¹˜ ì»¤ë²„ë¦¬ì§€**: 85% ì´ìƒ
- **í•¨ìˆ˜ ì»¤ë²„ë¦¬ì§€**: 100%
- **êµ¬ë¬¸ ì»¤ë²„ë¦¬ì§€**: 90% ì´ìƒ

## ğŸ¯ ì„±ê³µ ê¸°ì¤€

1. **ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼**: ì‘ì„±ëœ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ ì„±ê³µì ìœ¼ë¡œ í†µê³¼
2. **ì½”ë“œ í’ˆì§ˆ**: ESLint ê·œì¹™ ì¤€ìˆ˜, ì½”ë“œ ë¦¬ë·° í†µê³¼
3. **ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­**: API ì‘ë‹µ ì‹œê°„ 3ì´ˆ ì´ë‚´, í˜ì´ì§€ ë¡œë”© ì‹œê°„ 2ì´ˆ ì´ë‚´
4. **ì‚¬ìš©ì ê²½í—˜**: ì§ê´€ì ì¸ UI/UX, ì˜¤ë¥˜ ìƒí™©ì—ì„œë„ ì•ˆì •ì ì¸ ë™ì‘