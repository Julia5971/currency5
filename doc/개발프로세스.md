## **🛠️ 실시간 환율 정보 및 분석 웹 서비스 개발 전략**

### **📌 프로젝트 개요**

본 문서는 실시간 환율 정보 및 분석 웹 서비스의 효율적인 개발을 위한 기술
스택, 데이터 관리, API 연동 및 에러 처리, 개발 일정, 테스트 전략 등
전반적인 개발 계획을 다룹니다.

### **1. 기술 스택 및 데이터 관리 전략**

#### **1.1 기술 스택**

-   **Frontend**: HTML5, CSS3, Vanilla JavaScript

-   **데이터 소스**:

    -   **1순위**: ExchangeRate-API (메인)

    -   **2순위**: CurrencyAPI (백업)

    -   **3순위**: Fixer.io (보조)

-   **차트 라이브러리**: Chart.js (경량화)

-   **아이콘**: Font Awesome

#### **1.2 데이터 저장 방식 (브라우저 로컬스토리지)**

-   **선택 이유**: 서버 구축 불필요, 비용 무료, 빠른 접근 속도, 초보자도
    > 쉽게 구현 가능.

-   **저장 데이터**:

    -   환율 데이터 (\`exchangeRates\`, \`lastUpdate\` 타임스탬프)

    -   API 백업 정보 (\`apiSource\`, \`fallbackAPIs\` 목록)

-   **관리 전략**: \`localStorage\`에 너무 많은 데이터를 저장하지
    > 않도록, 특정 기간(예: 1시간) 이후 데이터는 만료되도록 관리 정책을
    > 수립합니다.

### **2. API 연동 및 에러 처리 시스템**

#### **2.1 다중 API 백업 시스템**

-   **우선순위**:

    1.  \`ExchangeRate-API\` (주 API)

    2.  \`CurrencyAPI\` (1차 백업)

    3.  \`Fixer.io\` (2차 백업)

-   **폴백(Fallback) 로직**: 주 API 호출 실패 시, 백업 API를 순차적으로
    > 호출하여 데이터 안정성을 확보합니다.

-   **데이터 형식 통일**: 각 API의 응답 형식이 다르므로, 데이터를 통일된
    > 형식으로 정규화하는 로직을 구현합니다. (예: 모든 API 응답을
    > \`base\`, \`date\`, \`rates\`, \`source\` 필드를 포함하는 객체로
    > 변환)

#### **2.2 로컬 캐시 및 기본값 활용**

-   **로컬 캐시 사용**: 모든 API 호출이 실패할 경우, \`localStorage\`에
    > 저장된 24시간 이내의 유효한 로컬 캐시 데이터를 사용합니다.

-   **기본값 반환**: API 및 캐시 데이터 모두 실패 시, 하드코딩된 기본
    > 환율 정보를 반환하여 서비스 중단을 방지하고 사용자에게 최소한의
    > 정보를 제공합니다.

-   **데이터 캐시 유효기간(TTL)**: API로 가져온 데이터는 1시간이 지나면
    > 만료되도록 설정하여 항상 최신 정보에 가까운 데이터를 유지합니다.

#### **2.3 API 키 관리 (보안 고려)**

-   **초기 단계**: 개발 편의성을 위해 JavaScript 코드 내에 API 키를 직접
    > 포함할 수 있습니다.

-   **향후 개선 방향**: 서비스 확장 및 보안 강화를 위해 서버리스
    > 함수(예: AWS Lambda, Firebase Functions) 등을 활용하여 서버
    > 사이드에서 API 호출을 처리하고 클라이언트에는 API 키가 노출되지
    > 않도록 하는 방안을 고려합니다.

### **3. 개발 일정 (4주 계획)**

TDD(Test-Driven Development) 원칙에 따라 Red(실패하는 테스트 작성) -\>
Green(테스트 통과) -\> Refactor(코드 개선) 사이클을 따릅니다.

#### **3.1 1주차: 기반 구조 + API 연동 테스트**

-   **Day 1-2**: HTML 기본 구조 설계 및 구현, \`ExchangeRate-API\` 연동
    > 테스트 및 응답 데이터 확인.

-   **Day 3-4**: CSS 기본 스타일링 적용, API 응답 데이터를 화면에 표시.

-   **Day 5-7**: 반응형 디자인 초기 구현, CORS 문제 해결 방안 적용, 다중
    > API 백업 시스템의 기본 에러 처리 로직 구현.

#### **3.2 2주차: JavaScript 기능 + 데이터 관리**

-   **Day 1-2**: 환차손 계산 로직 구현 및 입력값 유효성 검증 기능 개발.

-   **Day 3-4**: 로컬스토리지 기반 데이터 저장 및 로드 시스템 구현, 과거
    > 데이터 수집 로직 개발.

-   **Day 5-7**: API 호출 실패 시 백업 데이터 및 기본값 사용 로직 강화,
    > 로딩 인디케이터 구현, 웹 접근성 기본 기능 추가.

#### **3.3 3주차: 차트 구현 + 고급 기능**

-   **Day 1-2**: \`Chart.js\`를 활용한 환율 차트 구현 및 과거 데이터
    > 시각화.

-   **Day 3-4**: 단순 이동평균선 분석 로직 구현 및 트렌드 예측 기능
    > 개발.

-   **Day 5-7**: 정보 인쇄 기능 구현 (인쇄용 CSS 포함), 전반적인 성능
    > 최적화 (차트 렌더링, 데이터 로딩 등).

#### **3.4 4주차: 테스트 및 배포 준비**

-   **Day 1-2**: 단위 테스트(TDD 계획서 기반), 통합 테스트(API 실패 및
    > 캐시 사용 시나리오 재현), 다중 API 연동 테스트.

-   **Day 3-4**: 사용자 테스트 진행 및 피드백 반영, 버그 수정.

-   **Day 5-7**: 배포 환경 설정 및 배포 준비, 최종 QA, 개발 문서화.

### **4. 테스트 전략**

-   **단위 테스트 (Unit Test)**:

    -   **데이터 처리 계층**: \`getExchangeRate()\`가 기본/백업 API
        > 호출, 로컬 캐시 사용, 기본값 반환을 올바르게 수행하는지
        > 테스트. 데이터 캐시 유효기간(TTL) 테스트.

    -   **비즈니스 로직 계층**: \`calculateProfit()\`의 정확한 계산 결과
        > 및 유효하지 않은 값에 대한 에러 처리, 계산 결과 반올림, 과거
        > 데이터 조회 범위(30일) 테스트.

-   **통합 테스트 (Integration Test)**:

    -   다중 API 백업 시스템이 실제 네트워크 환경 변화(API 응답 지연,
        > 실패)에 따라 올바르게 작동하는지 테스트.

    -   데이터 로딩 상태(\`loading\`), 캐시 사용 상태(\`backup\`),
        > 오프라인 상태(\`offline\`)에 따른 UI 변화 및 메시지 표시가
        > 정확한지 테스트.

    -   환차손 계산기 입력 유효성 검사 및 결과 표시가 UI와 비즈니스 로직
        > 간에 올바르게 연동되는지 테스트.

-   **사용자 테스트 (User Acceptance Test)**:

    -   실제 사용자가 서비스를 이용하며 기능의 정상 작동 여부, 사용
        > 편의성, 디자인 만족도 등을 평가하고 피드백을 수집하여 개선에
        > 반영합니다.

### **5. 성능 최적화 전략**

-   **Chart.js 최적화**: 대량의 과거 데이터를 표시할 경우 렌더링 성능
    > 저하가 발생할 수 있으므로, 초기 로딩 시 데이터 양을 제한하거나,
    > 필요한 시점에만 데이터를 불러오는 Lazy Loading 전략을 고려합니다.

-   **로컬스토리지 관리**: \`localStorage\`에 저장되는 데이터의 크기를
    > 모니터링하고, 불필요한 데이터는 주기적으로 삭제하여 성능 저하를
    > 방지합니다.

-   **DOM 조작 최소화**: JavaScript를 통한 DOM 조작을 최소화하고,
    > 효율적인 방법을 사용하여 렌더링 성능을 향상시킵니다.

### **6. 최종 체크리스트**

#### **6.1 API 관련 확인사항**

-   \[ \] ExchangeRate-API 계정 생성 완료 및 API 키 발급 완료

-   \[ \] 백업 API (CurrencyAPI, Fixer.io) 계정 준비 (필요시)

-   \[ \] CORS 문제 해결 방안 확정 및 코드 적용

-   \[ \] API 호출 제한 모니터링 시스템 구현 (필요시)

#### **6.2 개발 환경 확인사항**

-   \[ \] 로컬 개발 서버 설정 완료

-   \[ \] 개발자 도구(콘솔, 네트워크 탭)를 활용한 API 호출 테스트 성공
    > 확인

-   \[ \] 네트워크 오류 시 백업 시스템 작동 및 로컬 데이터 표시 확인

-   \[ \] 오프라인 상황에서 기본값 표시 확인

-   \[ \] API 키 보안 관리 방안 논의 (향후 서버리스 함수 등 적용 고려)
